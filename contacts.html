<div class="pull-right dropdown">
    <button type="button" class="btn btn-default btn-outline dropdown-toggle"><span class="fa fa-gears fa-lg"></span></button>
    <ul class="dropdown-menu" role="menu">
        <li>
            <a href="javascript:void(0)" ng-click="groupOPT.groupAdd=1"><span class="fa fa-plus"></span> New Group</a>     
        </li>
        <li>
            <a href="javascript:void(0)"><span class="fa fa-plus"></span> New Contact</a>     
        </li>             
    </ul>
</div>   
<div class="pull-right margin-right-S">
<button type="button" class="btn btn-default btn-outline" ng-click="globalEdit=!globalEdit">
    <span ng-if="!globalEdit" class="fa fa-pencil-square-o fa-lg"></span>
    <span ng-if="globalEdit" class="fa fa-share-square-o fa-lg"></span>
</button>
</div>
<div class="row no-gutter">
    <div class="col-sm-3 col-lg-3">
        <div class="list-group no-border-radius-TR">
            <div class="list-group-item">
                <div class="search-icon">
                    <input type="text" class="form-control" placeholder="Search..." ng-model="groupOPT.searchTerm"/>
                    <i></i>
                </div>  
            </div>
            <div ng-if="groupOPT.groupAdd" class="list-group-item animate-if">
                <form name="newGroupForm" class="input-group">
                  <input type="text" class="form-control" placeholder="Group" ng-model="groupOPT.addGroupName" required>
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="button" ng-click="groupOPT.groupAdd=0;groupOPT.addGroupName=''"><span class="fa fa-times"></span></button>
                    <button class="btn btn-default" type="button" ng-click="addGroup()" ng-disabled="newGroupForm.$invalid"><span class="fa fa-check"></span></button>
                  </span>
                </form>
            </div>            
            <div class="list-group-item list-group-item-primary">
                <h4 class="list-group-item-heading">All Groups</h4>
            </div>            
            <div ng-click="selGroup(group.id, $event)" ng-repeat="group in groupOPT.groups | filter: groupOPT.searchTerm | orderBy:'label'" 
            data-drop="true" jqyoui-droppable="{onDrop:'addElementToGroup', onOver:'highlightOver', onOut:'highlightOut'}" data-options='{"id":"{{group.id}}"}' 
            class="list-group-item list-group-item-primary animate-enter" ng-class="{'list-group-item-primary-active':groupOPT.groupSel===group.id}">
                <h4 class="list-group-item-heading">
                    <span ng-if="!globalEdit">{{group.label}}</span>
                    <div ng-if="globalEdit" class="input-group">
                        <input type="text" class="form-control" ng-model="group.label">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" modal-confirm title="Confirm" text="Delete Group &quot;{{group.label}}&quot;?" function="removeGroup(group.id)">
                                <i class="fa fa-times"></i>
                            </button>
                        </span>
                    </div> 
                </h4>
            </div>            
        </div>
    </div>
    <div class="col-sm-3 col-lg-3 leap-left-1">
        <div class="list-group no-border-radius-TL">
            <div class="list-group-item">                
                <div class="search-icon">
                    <input type="text" class="form-control" placeholder="Search..." ng-model="filterOPT.searchTerm"  ng-change="contactsOPT.contactNamesDisplay=contactsOPT.contactNames;filterOPT.letterSelected=''"/>
                    <i></i>
                </div>                
            </div>
            <a href="" class="list-group-item list-group-flesh" data-drag='true' data-jqyoui-options='{revert: false, helper: "clone"}' jqyoui-draggable data-options='{"id":"123abc"}'>
                <i class="fa fa-3x fa-user pull-left"></i>
                <h4 class="list-group-item-heading">Peter Windemann</h4>
                <p class="list-group-item-text">                    
                    <span ng-if="!item.company && !item.jobTitle">Company</span>
               </p>      
            </a>
            <a href="javascript:void(0)" ng-repeat="item in contactsOPT.contactNamesDisplay | orderBy:'lastName' | filter:filterOPT.searchTerm" ng-if="contactsOPT.groupSel==null || groupCheck(item._id)"  ng-class="{'active':contactsOPT.contactTmp._id==item._id}" ng-click="contactsShow(item)" class="list-group-item list-group-flesh">
                <i class="fa fa-3x fa-user pull-left"></i>
                <h4 class="list-group-item-heading">{{item.lastName}} {{item.firstName}}</h4>
                <p class="list-group-item-text">
                    <span ng-if="item.jobTitle">{{item.jobTitle}}</span> <span ng-if="item.company">{{item.company}}</span>
                    <span ng-if="!item.company && !item.jobTitle">Company</span>
               </p>
            </a>
        </div>
    </div>
    <div class="col-sm-6 col-lg-6 leap-left-1">
        <form name="contactForm">
            <div class="list-group list-group-no-border-radius list-group-no-border-left">           
                <div class="list-group-item" ng-if="contactsOPT.contactDisplay">
                    <p class="text-muted">Name</p>
                    <h4 ng-if="!contactsOPT.contactEdit" class="list-group-item-heading">{{contactsOPT.contactDisplay[0].items[0]}} {{contactsOPT.contactDisplay[1].items[0]}}</h4><!--View-->
                    <div class="row" ng-if="contactsOPT.contactEdit"><!--Edit-->
                        <div class="col-md-6">
                            <input type="text" class="form-control" ng-model="contactsOPT.contactDisplay[0].items[0]" placeholder="Last Name" ng-required="itemsOPT.lastName.required"/>
                       </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control" ng-model="contactsOPT.contactDisplay[1].items[0]" placeholder="First Name" ng-required="itemsOPT.firstName.required"/>
                        </div>
                    </div>
                </div>
                <div class="list-group-item item-animate clearfix" ng-repeat="item in contactsOPT.contactDisplay | orderBy:'sortNr'" ng-if="item.items && item.items.length && !item.hide">
                    <p class="text-muted">{{item.label}}</p>
                    <button class="btn btn-default position-bottom-right" ng-if="contactsOPT.contactEdit && itemsOPT[item.key].hasDropdown" ng-click="addItemDropdown(item)"><span class="fa fa-plus"></span></button>
                    <div ng-repeat="e in item.items track by $index" ng-init="parentIndex=$index">
                        <div ng-if="e.type!==undefined" class="pull-left margin-right-M">
                            <h4 ng-if="!contactsOPT.contactEdit" class="list-group-item-heading" >{{e.type}}</h4><!--View-->
                            <!--Dropdown-->
                            <div ng-if="contactsOPT.contactEdit && itemsOPT[item.key].hasDropdown"><!--Edit-->
                               <div ng-if="itemsOPT[item.key].showNr===$index" class="input-group margin-bottom-S margin-right-S"><!-- Custom Edit-->
                                    <input type="text" class="form-control" ng-model="e.type"/>
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" ng-disabled="e.type==''" ng-click="itemsOPT[item.key].showNr=''"><span class="fa fa-check"></span></button>
                                    </span>
                                </div>
                                <div ng-if="itemsOPT[item.key].showNr!==$index" class="dropdown">
                                    <h4 class="dropdown-toggle pointer" ng-class="{'pull-left':!itemsOPT[item.key].items.length}">
                                        {{e.type}} <span class="fa fa-caret-down"></span>
                                    </h4>
                                    <button ng-if="!itemsOPT[item.key].items.length" ng-click="deleteItem(2, item.key, parentIndex)" class="btn btn-default pull-right"><span class="fa fa-trash-o"></span></button>
                                <ul class="dropdown-menu text-left" role="menu">
                                    <li ng-repeat="type in itemsOPT[item.key].dropdown">
                                        <a href="javascript:void(0)" ng-click="setDropdown(type, e)">{{type}}</a>
                                    </li>
                                    <li class="divider"></li>
                                    <li><a href="javascript:void(0)" ng-click="itemsOPT[item.key].showNr=$index">Custom</a></li>
                                </ul>
                                </div>
                            </div>
                            <!--End Dropdown-->
                            <div class="margin-right-S margin-bottom-S" ng-repeat="key in notSorted(e) track by $index" ng-if="key!=='type'" ng-class="{'pull-left':itemsOPT[item.key].items[key].nobr, 'clearfix':1}">
                                <span ng-if="!contactsOPT.contactEdit && key!=='dateValue'">{{e[key]}}</span><!--View-->
                                <span ng-if="!contactsOPT.contactEdit && key==='dateValue'">{{e[key] | date:'dd.MM.yyyy'}}</span><!--View-->
                                <div class="input-group" ng-if="contactsOPT.contactEdit && itemsOPT[item.key].items.length"><!--Edit-->
                                    <input ng-if="key!=='dateValue'" type="text" class="form-control" ng-model="e[key]" placeholder="{{itemsOPT[item.key].label}}"/>
                                    <input  ng-if="key=='dateValue'" type="text" class="form-control" datepicker-popup="dd.MM.yyyy" ng-model="e[key]" placeholder="{{itemsOPT[item.key].label}}"
                                    ng-click="open($event, parentIndex)" is-open="opened[parentIndex]" ng-change="formatedate(e)" starting-day="1" show-weeks="0">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" ng-click="deleteItem(2, item.key, parentIndex)"><span class="fa fa-trash-o"></span></button>
                                    </span>
                                </div>
                                <input ng-if="contactsOPT.contactEdit && !itemsOPT[item.key].items.length" type="text" class="form-control" ng-model="e[key]"
                                placeholder="{{itemsOPT[item.key].items[key].label}}"/>
                            </div>
                        </div>
                        <div ng-if="e.type===undefined">
                            <h4 ng-if="!contactsOPT.contactEdit" class="list-group-item-heading">{{e}}</h4><!--View-->
                            <div class="input-group" ng-if="contactsOPT.contactEdit"><!--Edit-->
                                <input type="text" class="form-control" ng-model="item.items[0]" placeholder="{{::item.label}}"/>
                                <span class="input-group-btn">
                                    <button class="btn btn-default" ng-click="deleteItem(1, item.key)"><span class="fa fa-trash-o"></span></button>
                                </span>
                            </div>
                        </div>
                   </div>
                </div>
                <div class="panel-footer clearfix" ng-if="contactsOPT.contactEdit">
                    <button ng-click="contatcsDelete()" class="btn btn-danger pull-right"><span class="fa fa-trash-o"></span> Delete</button>
                    <div class="dropdown dropup pull-right"><!--Additional Field-->
                        <button class="btn btn-default pull-right margin-right-S dropdown-toggle">Add Field <span class="fa fa-caret-up"></span></button>
                        <ul class="dropdown-menu text-left" role="menu">
                            <li ng-repeat="key in notSorted(itemsOPT)" ng-if="!itemsOPT[key].dHide" ng-class="{'disabled':isDisplayedKey(key)}">
                                <a href="javascript:void(0)" ng-click="addItemGeneric(key)">{{::itemsOPT[key].label}}</a>
                            </li>
                        </ul>
                    </div><!--Additional Field-->
                    <div class="dropdown dropup pull-right"><!--Groups-->
                        <button class="btn btn-default pull-right margin-right-S dropdown-toggle">Add to Group <span class="fa fa-caret-up"></span></button>
                        <ul class="dropdown-menu text-left" role="menu">
                            <li ng-repeat="group in groupOPT.groups | orderBy:predicate" ng-class="{'disabled':groupContactCheck(group)}">
                                <a href="javascript:void(0)" ng-click="addToGroup(group)">
                                    <span class="fa fa-check pull-left" ng-if="groupContactCheck(group)"></span>
                                    <span class="badge pull-right">{{groupOPT.groupcount[group]}}</span>{{group}}</a>
                             </li>
                        </ul>
                    </div>
                </div>            
            </div>
        </form>
    </div>
</div>

