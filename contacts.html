<div class="row">
    <div class="col-sm-3 col-lg-3">
        <div class="panel panel-white no-border-radius">
            <div class="panel-heading">
                <h4>Adressbücher</h4>
                <ul class="panel-header-actions border-light"> <!-- ////////// GROUP HEADING ACTIONS ///////////////-->                    
                    <li class="dropdown">
                        <a class="dropdown-toggle dropdown-options"><span class="fa fa-ellipsis-v fa-2x"></span></a>                        
                        <ul class="dropdown-menu" role="menu">
                            <li>
                                <a href="javascript:void(0)" ng-click="groupOPT.groupAdd=1"><span class="fa fa-plus"></span> Neues Adressbuch</a>     
                            </li>
                            <li>
                                <a href="javascript:void(0)" ng-click="groupOPT.groupEdit=!groupOPT.groupEdit">
                                    <span class="fa" ng-class="{'fa-pencil-square-o':!groupOPT.groupEdit, 'fa-check':groupOPT.groupEdit, }"></span> 
                                    <span ng-if="!groupOPT.groupEdit">Adressbücher bearbeiten</span><span ng-if="groupOPT.groupEdit">Bearbeiten beenden</span>
                                </a>                                 
                            </li>             
                        </ul>                        
                    </li>
                    <li ng-if="groupOPT.groupEdit">
                        <button class="btn-none" ng-click="groupOPT.groupEdit=false"><span class="fa fa-check fa-2x dropdown-toggle"></span></button>
                    </li>                   
                </ul>                    
            </div>
            <div class="panel-body no-padding panel-list-group">    
                <div class="list-group">
                    <div class="list-group-item">
                        <div class="search-icon">
                            <input type="text" class="form-control" placeholder="Suche..." ng-model="groupOPT.searchTerm"/>
                            <i></i>
                        </div>  
                    </div>
                    <div ng-if="groupOPT.groupAdd" class="list-group-item animate-if"> <!-- ////////// GROUP ADD ///////////////-->
                        <form name="newGroupForm" class="input-group">
                          <input type="text" class="form-control" placeholder="Group" ng-model="groupOPT.addGroupName" required>
                          <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="groupOPT.groupAdd=0;groupOPT.addGroupName=''"><span class="fa fa-times"></span></button>
                            <button class="btn btn-default" type="button" ng-click="addGroup()" ng-disabled="newGroupForm.$invalid"><span class="fa fa-check"></span></button>
                          </span>
                        </form>
                    </div>            
                    <div class="list-group-item list-group-item-primary">
                        <h4 class="list-group-item-heading">All</h4>
                    </div>            
                    <div ng-click="selGroup(group.id)" ng-repeat="group in groupOPT.groups | filter: groupOPT.searchTerm | orderBy:'label'" 
                    data-drop="true" jqyoui-droppable="{onDrop:'addElementToGroup', onOver:'highlightOver', onOut:'highlightOut'}" data-options='{"id":"{{group.id}}"}' 
                    class="list-group-item list-group-item-primary animate-enter" ng-class="{'list-group-item-primary-active':groupOPT.groupSel===group.id}">
                        <h4 class="list-group-item-heading">
                            <span ng-if="!groupOPT.groupEdit">{{group.label}}</span>
                            <div ng-if="groupOPT.groupEdit" class="input-group">
                                <input type="text" class="form-control" ng-model="group.label">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="button" modal-confirm title="Löschen" text="Gruppe &quot;{{group.label}}&quot; wirklich löschen?" 
                                    function="removeGroup(group.id)">
                                        <i class="fa fa-trash-o"></i>
                                    </button>
                                </span>
                            </div> 
                        </h4>
                    </div>            
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-9 col-lg-9">
        <div class="panel panel-white no-border-radius">
            <div class="panel-heading">
                <h4>Kontakte</h4>
                <ul class="panel-header-actions border-light">  <!-- ////////// CONTACT HEADING ACTIONS ///////////////-->
                    <li class="dropdown">
                        <a class="dropdown-toggle dropdown-options"><span class="fa fa-ellipsis-v fa-2x"></span></a>                          
                        <ul class="dropdown-menu" role="menu">
                            <li>
                                <a href="javascript:void(0)" ng-click="addUser()"><span class="fa fa-plus"></span> Neuer Kontakt</a>     
                            </li>
                            <li>
                                <a href="javascript:void(0)" ng-click="contactsOPT.contactEdit=!contactsOPT.contactEdit">
                                    <span class="fa" ng-class="{'fa-pencil-square-o':!contactsOPT.contactEdit, 'fa-check':contactsOPT.contactEdit, }"></span> 
                                    <span ng-if="!contactsOPT.contactEdit">Kontakt bearbeiten</span><span ng-if="contactsOPT.contactEdit">Bearbeiten beenden</span>
                                </a>                                 
                            </li>            
                        </ul>
                    </li>
                    <li ng-if="contactsOPT.contactEdit">
                        <button class="btn-none" ng-disabled="contactForm.$invalid" ng-click="contatcsSave()"><span class="fa fa-check fa-2x"></span></button>
                    </li>                   
                    <li ng-if="contactsOPT.contactEdit">
                        <div class="dropdown"><!--Additional Field-->
                            <button class="btn-none dropdown-toggle"><span class="fa fa-plus fa-2x"></span></button>
                            <ul class="dropdown-menu text-left" role="menu">
                                <li ng-repeat="key in notSorted(itemsOPT)" ng-if="!itemsOPT[key].dHide" ng-class="{'disabled':isDisplayedKey(key)}">
                                    <a href="javascript:void(0)" ng-click="addItemGeneric(key)">{{::itemsOPT[key].label}}</a>
                                </li>
                            </ul>
                        </div><!--Additional Field-->                                
                    </li>
                    <li ng-if="contactsOPT.contactEdit">
                        <button class="btn-none" modal-confirm title="Löschen" function="contactsDelete()"
                        text="Kontakt &quot;{{contactsOPT.contactDisplay[0].items[0]}} {{contactsOPT.contactDisplay[1].items[0]}}&quot; wirklich löschen?">
                            <span class="fa fa-trash fa-2x"></span>
                        </button>
                    </li> 
                </ul>                    
            </div>
            <div class="panel-body no-padding panel-list-group">
                <div class="row no-gutter">
                    <div class="col-sm-4 col-lg-4 border-right"> <!-- ////////// CONTACTS LEFT SIDE ///////////////-->
                        <div class="list-group">
                            <div class="list-group-item">                
                                <div class="search-icon">
                                    <input type="text" class="form-control" placeholder="Suche..." ng-model="filterOPT.searchTerm"  ng-change="contactsOPT.contactNamesDisplay=contactsOPT.contactNames;filterOPT.letterSelected=''"/>
                                    <i></i>
                                </div>                
                            </div>
                            <a href="javascript:void(0)" ng-repeat="item in contactsOPT.contactNamesDisplay | orderBy:'lastName' | filter:filterOPT.searchTerm" 
                            ng-if="contactsOPT.groupSel==null || groupCheck(item.tid)" ng-class="{'active':contactsOPT.contactTmp.tid==item.tid}" ng-click="contactsShow(item)" 
                            class="list-group-item list-group-flesh" data-drag='true' data-jqyoui-options='{revert: false, helper: "clone", appendTo: "body"}'
                            jqyoui-draggable data-options='{"id":"{{item.tid}}"}'>
                                <i class="fa fa-3x fa-user pull-left"></i>
                                <h4 class="list-group-item-heading">{{item.lastName}} {{item.firstName}}</h4>
                                <p class="list-group-item-text">
                                    <span ng-if="item.jobTitle">{{item.jobTitle}}</span> <span ng-if="item.company">{{item.company}}</span>
                                    <span ng-if="!item.company && !item.jobTitle">Company</span>
                               </p>
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-8 col-lg-8 border-left leap-left-1"> <!-- ////////// CONTACTS RIGHT SIDE ///////////////-->
                        <form name="contactForm">
                            <div class="list-group">           
                                <div class="list-group-item" ng-if="contactsOPT.contactDisplay">
                                    <p class="text-muted">Name</p>
                                    <h4 ng-if="!contactsOPT.contactEdit" class="list-group-item-heading">{{contactsOPT.contactDisplay[0].items[0]}} {{contactsOPT.contactDisplay[1].items[0]}}</h4><!--View-->
                                    <div class="row" ng-if="contactsOPT.contactEdit"><!--Edit-->
                                        <div class="col-md-6">
                                            <input type="text" class="form-control" ng-model="contactsOPT.contactDisplay[0].items[0]" placeholder="Last Name" ng-required="itemsOPT.lastName.required"/>
                                       </div>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control" ng-model="contactsOPT.contactDisplay[1].items[0]" placeholder="First Name" ng-required="itemsOPT.firstName.required"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="list-group-item clearfix" ng-repeat="item in contactsOPT.contactDisplay | orderBy:'sortNr'" 
                                ng-if="item.items && item.items.length && !item.hide" ng-class="{'animate-if':item.animate}">
                                    <p class="text-muted pull-left">
                                        {{item.label}}
                                    </p>
                                    <button class="btn-none pull-left" ng-if="contactsOPT.contactEdit && itemsOPT[item.key].hasDropdown" ng-click="addItemDropdown(item)">
                                        <span class="fa fa-plus"></span>
                                    </button>                                    
                                    <div class="clearfix"></div>
                                    <div ng-repeat="e in item.items track by $index" ng-init="parentIndex=$index">
                                        <div ng-if="e.type!==undefined" class="pull-left margin-bottom-M min-width-contact-float" ng-class="{'float-left-border-right':!$last}">
                                            <h4 ng-if="!contactsOPT.contactEdit" class="list-group-item-heading" >{{e.type}}</h4><!--View-->
                                            <!--Dropdown-->
                                            <div ng-if="contactsOPT.contactEdit && itemsOPT[item.key].hasDropdown"><!--Edit-->
                                               <div ng-if="itemsOPT[item.key].showNr===$index" class="input-group margin-bottom-S margin-right-S"><!-- Custom Edit-->
                                                    <input type="text" class="form-control" ng-model="e.type"/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-disabled="e.type==''" ng-click="itemsOPT[item.key].showNr=''"><span class="fa fa-check"></span></button>
                                                    </span>
                                                </div>
                                                <div ng-if="itemsOPT[item.key].showNr!==$index" class="dropdown">
                                                    <h4 class="dropdown-toggle pointer" ng-class="{'pull-left':!itemsOPT[item.key].items.length}">
                                                        {{e.type}} <span class="fa fa-caret-down"></span>
                                                    </h4>
                                                    <button ng-if="!itemsOPT[item.key].items.length" ng-click="deleteItem(2, item.key, parentIndex)" class="btn btn-default pull-right"><span class="fa fa-trash-o"></span></button>
                                                <ul class="dropdown-menu text-left" role="menu">
                                                    <li ng-repeat="type in itemsOPT[item.key].dropdown">
                                                        <a href="javascript:void(0)" ng-click="setDropdown(type, e)">{{type}}</a>
                                                    </li>
                                                    <li class="divider"></li>
                                                    <li><a href="javascript:void(0)" ng-click="itemsOPT[item.key].showNr=$index">Custom</a></li>
                                                </ul>
                                                </div>
                                            </div>
                                            <!--End Dropdown-->
                                            <div class="margin-right-S margin-bottom-S" ng-repeat="key in notSorted(e) track by $index" ng-if="key!=='type'" ng-class="{'pull-left':itemsOPT[item.key].items[key].nobr, 'clearfix':1}">
                                                <div ng-if="!contactsOPT.contactEdit" ng-bind-html="e[key] | textFormatter"></div><!--View-->
                                                <div class="input-group" ng-if="contactsOPT.contactEdit && itemsOPT[item.key].items.length"><!--Edit-->
                                                    <input ng-if="key!=='dateValue'" type="text" class="form-control" ng-model="e[key]" placeholder="{{itemsOPT[item.key].label}}"/>
                                                    <input ng-if="key=='dateValue'" type="text" class="form-control" datepicker-popup="dd.MM.yyyy" ng-model="e[key]" 
                                                    placeholder="{{itemsOPT[item.key].label}}" ng-click="open($event, parentIndex)" is-open="opened[parentIndex]" 
                                                    ng-change="formatedate(e)" starting-day="1" show-weeks="0">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" ng-click="deleteItem(2, item.key, parentIndex)"><span class="fa fa-trash-o"></span></button>
                                                    </span>
                                                </div>
                                                <input ng-if="contactsOPT.contactEdit && !itemsOPT[item.key].items.length" type="text" class="form-control" ng-model="e[key]"
                                                placeholder="{{itemsOPT[item.key].items[key].label}}"/>
                                            </div>
                                        </div>
                                        <div ng-if="e.type===undefined">
                                            <h4 ng-if="!contactsOPT.contactEdit" class="list-group-item-heading">{{e}}</h4><!--View-->
                                            <div class="input-group" ng-if="contactsOPT.contactEdit"><!--Edit-->
                                                <input type="text" class="form-control" ng-model="item.items[0]" placeholder="{{::item.label}}"/>
                                                <span class="input-group-btn">
                                                    <button class="btn btn-default" ng-click="deleteItem(1, item.key)"><span class="fa fa-trash-o"></span></button>
                                                </span>
                                            </div>
                                        </div>
                                   </div>
                                </div>          
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

